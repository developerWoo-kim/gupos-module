<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>주문 화면</title>
    <link id="style" href="/assets/libs/bootstrap/css/bootstrap.css" rel="stylesheet">
    <link rel="stylesheet" href="/assets/css/styles.css">

    <style>
        /* 최상단 바 */
        .order-header-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem;
            background: var(--white-9);
        }

        /*!* 상점 정보 *!*/
        .store-header {
            padding: 0 1.25rem 0 1.25rem;;
            margin-top: 0.5rem;
        }

        .store-header__info {
            display: flex;
            justify-content: space-between;
        }

        .notice-banner {
            display: flex;
            align-items: center;
            background: #f7f9fa;
            padding: 0.65rem;
            border-radius: 50px;
            margin-top: 0.75rem;
        }

        /*!* 탭 네비게이션 (탭만 sticky) *!*/
        .tab-nav {
            position: sticky;
            top: 0; /* header는 스크롤되지만 탭만 고정 */
            background: var(--custom-white);
            padding: 0 1rem 0 1rem;
            z-index: 5;
            border-bottom: 1px solid var(--default-border);
            scrollbar-width: none; /* Firefox 스크롤바 제거 */
            overflow-x: auto;
            margin-top: 1rem;
        }

        .tab-nav::-webkit-scrollbar {
            display: none; /* 크롬/사파리 스크롤바 제거 */
        }

        .tab-nav__list {
            display: flex;
            gap: 1rem;
            margin: 0;
            padding: 0 0.5rem;
            list-style: none;
            white-space: nowrap;
        }

        .tab-nav__item {
            cursor: pointer;
            font-size: 17px;
            font-weight: 500;
            color: rgb(var(--dark-rgb));
            opacity: 0.6;
            padding-bottom: 1rem;
            padding-top: 1rem;
            border-bottom: 2px solid transparent;
        }

        .tab-nav__item.active {
            border-bottom: 2px solid var(--custom-black);
            color: var(--custom-black) !important;
            opacity: 1;
            font-weight: 600;
        }


        /*!* 콘텐츠 *!*/
        .order-content {
            /*padding: 1rem;*/
            background: var(--default-border); /* ✅ 변경: content 영역 배경색 */
            min-height: calc(50vh - 8rem);
            transition: all 0.05s ease;
        }

        /*!* 각 상품 섹션 *!*/
        .product-section {
            margin-bottom: 1rem; /* ✅ 하단 마진 추가 */
            background: #ffffff; /* ✅ 섹션별 배경 유지 */
            padding: 1rem; /* 내부 여백 추가 (카드 스타일) */
        }

        .product-section__title {
            font-size: 17px;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .product-section__desc {
            font-size: 14px;
            color: var(--dark-rgb);
            opacity: 0.5;
        }

        .product-card {
            display: flex;
            gap: 1rem;
        }

        .product-card__image {
            width: 95px;
            height: 95px;
            border-radius: 15px;
            object-fit: cover;
        }

        .product-card__info {
            flex: 1;
        }

        .product-card__name {
            display: flex;
            align-items: center;
            gap: 1rem;
            font-size: 17px;
        }

        .product-card__price {
            font-size: 14px;
            font-weight: 600;
        }

        .product-card__desc {
            font-size: 14px;
            color: var(--dark-rgb);
            opacity: 0.5;
        }

        /*!* 배지 *!*/
        .badge {
            display: inline-block;
            font-size: 10px;
            padding: 4px 8px;
            border-radius: 12px;
            color: white;
            margin-bottom: 0.25rem;
        }

        .badge--green { background: #1cc88a; }
        .badge--blue { background: #36a2eb; }
        .badge--red { background: #e74a3b; }
    </style>
</head>
<body>
<script type="text/javascript">
    (function () {
        console.log(JSON.parse(sessionStorage.getItem("test")));
    })()
</script>
<div class="page">
    <div class="order-header-bar">
        <div>
            🔔<span class="fs-16 text-dark op-6 fw-semibold"> 직원호출</span>
        </div>
        <span class="fs-16 text-dark op-7 fw-semibold">주문내역</span>
    </div>

        <!-- 상점 정보 영역 -->
        <div class="store-header">
            <div class="store-header__info">
                <h1 class="store-header__name fs-22 fw-semibold">토스 카페</h1>
                <span class="store-header__table text-dark op-5">테이블 : 1번 테이블</span>
            </div>
            <div class="notice-banner">
                <span class="notice-banner__icon me-2">📢</span>
                <span class="notice-banner__text fs-14 text-dark op-6">1인당 1메뉴 부탁드려요 :)</span>
            </div>
        </div>

        <!-- 탭 네비게이션 (스크롤 고정) -->
        <nav class="tab-nav">
            <ul class="tab-nav__list">
                <th:block th:each="category, stat : ${categoryList}">
                    <li class="tab-nav__item" th:classappend="${stat.index == 0 ? 'active' : null}">
                        <a th:href="${'#category_'+category.categoryId}" th:text="${category.categoryNm}">리뷰 이벤트</a>
                    </li>
                </th:block>
            </ul>
        </nav>

        <!-- 콘텐츠 영역 -->
        <div class="order-content">

            <th:block th:each="category : ${categoryList}">
                <section class="product-section" th:id="${'category_' +category.categoryId}">
                    <h2 class="product-section__title" th:text="${category.categoryNm}">샌드위치</h2>

                    <th:block th:each="product : ${category.productList}">
                        <a th:href="${'/table/table1/menu/' + product.productId}">
                            <div class="product-card">
                                <div class="product-card__info">
                                    <span class="badge badge--blue">인기</span>
                                    <h3 class="product-card__name" th:text="${product.productNm}"></h3>
                                    <p class="product-card__price" th:text="${#numbers.formatInteger(product.productPrice, 0, 'COMMA') + '원'}"></p>
                                    <p class="product-card__desc">크림치즈, 햄, 토마토, 루꼴라, 로메인이 들어간 건강한 샌드위치</p>
                                </div>
                                <img src="/assets/images/admin/tokbokki.jpg" alt="크로와상 샌드위치" class="product-card__image">
                            </div>
                        </a>
                    </th:block>
                </section>
            </th:block>
        </div>
    </div>
    <script>
        // 탭 클릭 시 부드러운 스크롤 이동
        const tabs = document.querySelectorAll('.tab-nav__item');
        tabs.forEach(tab => {
            const link = tab.querySelector('a');
            if (link) {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetId = link.getAttribute('href');
                    const targetEl = document.querySelector(targetId);
                    if (targetEl) {
                        window.scrollTo({
                            top: targetEl.offsetTop - 80, // 헤더 보정값
                            behavior: 'smooth'
                        });
                    }
                });
            }
        });

        // 스크롤 시 활성화된 탭 변경
        const sections = document.querySelectorAll('.product-section');
        window.addEventListener('scroll', () => {
            let currentId = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop - 100; // 보정값
                if (window.scrollY >= sectionTop) {
                    currentId = section.getAttribute('id');
                }
            });

            tabs.forEach(tab => {
                const link = tab.querySelector('a');
                if (link) {
                    const href = link.getAttribute('href').replace('#', '');
                    tab.classList.toggle('active', href === currentId);
                }
            });
        });
    </script>
</body>
</html>