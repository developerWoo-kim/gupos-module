<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì£¼ë¬¸ í™”ë©´</title>
    <link id="style" href="/assets/libs/bootstrap/css/bootstrap.css" rel="stylesheet">
    <link rel="stylesheet" href="/assets/css/styles.css">

    <style>
        /* ìµœìƒë‹¨ ë°” */
        .order-header-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem;
            background: var(--white-9);
        }

        /*!* ìƒì  ì •ë³´ *!*/
        .store-header {
            padding: 0 1.25rem 0 1.25rem;;
            margin-top: 0.5rem;
        }

        .store-header__info {
            display: flex;
            justify-content: space-between;
        }

        .notice-banner {
            display: flex;
            align-items: center;
            background: #f7f9fa;
            padding: 0.65rem;
            border-radius: 50px;
            margin-top: 0.75rem;
        }

        /*!* íƒ­ ë„¤ë¹„ê²Œì´ì…˜ (íƒ­ë§Œ sticky) *!*/
        .tab-nav {
            position: sticky;
            top: 0; /* headerëŠ” ìŠ¤í¬ë¡¤ë˜ì§€ë§Œ íƒ­ë§Œ ê³ ì • */
            background: var(--custom-white);
            padding: 0 1rem 0 1rem;
            z-index: 5;
            border-bottom: 1px solid var(--default-border);
            scrollbar-width: none; /* Firefox ìŠ¤í¬ë¡¤ë°” ì œê±° */
            overflow-x: auto;
            margin-top: 1rem;
        }

        .tab-nav::-webkit-scrollbar {
            display: none; /* í¬ë¡¬/ì‚¬íŒŒë¦¬ ìŠ¤í¬ë¡¤ë°” ì œê±° */
        }

        .tab-nav__list {
            display: flex;
            gap: 1rem;
            margin: 0;
            padding: 0 0.5rem;
            list-style: none;
            white-space: nowrap;
        }

        .tab-nav__item {
            cursor: pointer;
            font-size: 17px;
            font-weight: 500;
            color: rgb(var(--dark-rgb));
            opacity: 0.6;
            padding-bottom: 1rem;
            padding-top: 1rem;
            border-bottom: 2px solid transparent;
        }

        .tab-nav__item.active {
            border-bottom: 2px solid var(--custom-black);
            color: var(--custom-black) !important;
            opacity: 1;
            font-weight: 600;
        }


        /*!* ì½˜í…ì¸  *!*/
        .order-content {
            /*padding: 1rem;*/
            background: var(--default-border); /* âœ… ë³€ê²½: content ì˜ì—­ ë°°ê²½ìƒ‰ */
            min-height: calc(50vh - 8rem);
            transition: all 0.05s ease;
        }

        /*!* ê° ìƒí’ˆ ì„¹ì…˜ *!*/
        .product-section {
            margin-bottom: 1rem; /* âœ… í•˜ë‹¨ ë§ˆì§„ ì¶”ê°€ */
            background: #ffffff; /* âœ… ì„¹ì…˜ë³„ ë°°ê²½ ìœ ì§€ */
            padding: 1rem; /* ë‚´ë¶€ ì—¬ë°± ì¶”ê°€ (ì¹´ë“œ ìŠ¤íƒ€ì¼) */
        }

        .product-section__title {
            font-size: 17px;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .product-section__desc {
            font-size: 14px;
            color: var(--dark-rgb);
            opacity: 0.5;
        }

        .product-card {
            display: flex;
            gap: 1rem;
        }

        .product-card__image {
            width: 95px;
            height: 95px;
            border-radius: 15px;
            object-fit: cover;
        }

        .product-card__info {
            flex: 1;
        }

        .product-card__name {
            display: flex;
            align-items: center;
            gap: 1rem;
            font-size: 17px;
        }

        .product-card__price {
            font-size: 14px;
            font-weight: 600;
        }

        .product-card__desc {
            font-size: 14px;
            color: var(--dark-rgb);
            opacity: 0.5;
        }

        /*!* ë°°ì§€ *!*/
        .badge {
            display: inline-block;
            font-size: 10px;
            padding: 4px 8px;
            border-radius: 12px;
            color: white;
            margin-bottom: 0.25rem;
        }

        .badge--green { background: #1cc88a; }
        .badge--blue { background: #36a2eb; }
        .badge--red { background: #e74a3b; }
    </style>
</head>
<body>
<script type="text/javascript">
    (function () {
        console.log(JSON.parse(sessionStorage.getItem("test")));
    })()
</script>
<div class="page">
    <div class="order-header-bar">
        <div>
            ğŸ””<span class="fs-16 text-dark op-6 fw-semibold"> ì§ì›í˜¸ì¶œ</span>
        </div>
        <span class="fs-16 text-dark op-7 fw-semibold">ì£¼ë¬¸ë‚´ì—­</span>
    </div>

        <!-- ìƒì  ì •ë³´ ì˜ì—­ -->
        <div class="store-header">
            <div class="store-header__info">
                <h1 class="store-header__name fs-22 fw-semibold">í† ìŠ¤ ì¹´í˜</h1>
                <span class="store-header__table text-dark op-5">í…Œì´ë¸” : 1ë²ˆ í…Œì´ë¸”</span>
            </div>
            <div class="notice-banner">
                <span class="notice-banner__icon me-2">ğŸ“¢</span>
                <span class="notice-banner__text fs-14 text-dark op-6">1ì¸ë‹¹ 1ë©”ë‰´ ë¶€íƒë“œë ¤ìš” :)</span>
            </div>
        </div>

        <!-- íƒ­ ë„¤ë¹„ê²Œì´ì…˜ (ìŠ¤í¬ë¡¤ ê³ ì •) -->
        <nav class="tab-nav">
            <ul class="tab-nav__list">
                <th:block th:each="category, stat : ${categoryList}">
                    <li class="tab-nav__item" th:classappend="${stat.index == 0 ? 'active' : null}">
                        <a th:href="${'#category_'+category.categoryId}" th:text="${category.categoryNm}">ë¦¬ë·° ì´ë²¤íŠ¸</a>
                    </li>
                </th:block>
            </ul>
        </nav>

        <!-- ì½˜í…ì¸  ì˜ì—­ -->
        <div class="order-content">

            <th:block th:each="category : ${categoryList}">
                <section class="product-section" th:id="${'category_' +category.categoryId}">
                    <h2 class="product-section__title" th:text="${category.categoryNm}">ìƒŒë“œìœ„ì¹˜</h2>

                    <th:block th:each="product : ${category.productList}">
                        <a th:href="${'/table/table1/menu/' + product.productId}">
                            <div class="product-card">
                                <div class="product-card__info">
                                    <span class="badge badge--blue">ì¸ê¸°</span>
                                    <h3 class="product-card__name" th:text="${product.productNm}"></h3>
                                    <p class="product-card__price" th:text="${#numbers.formatInteger(product.productPrice, 0, 'COMMA') + 'ì›'}"></p>
                                    <p class="product-card__desc">í¬ë¦¼ì¹˜ì¦ˆ, í–„, í† ë§ˆí† , ë£¨ê¼´ë¼, ë¡œë©”ì¸ì´ ë“¤ì–´ê°„ ê±´ê°•í•œ ìƒŒë“œìœ„ì¹˜</p>
                                </div>
                                <img src="/assets/images/admin/tokbokki.jpg" alt="í¬ë¡œì™€ìƒ ìƒŒë“œìœ„ì¹˜" class="product-card__image">
                            </div>
                        </a>
                    </th:block>
                </section>
            </th:block>
        </div>
    </div>
    <script>
        // íƒ­ í´ë¦­ ì‹œ ë¶€ë“œëŸ¬ìš´ ìŠ¤í¬ë¡¤ ì´ë™
        const tabs = document.querySelectorAll('.tab-nav__item');
        tabs.forEach(tab => {
            const link = tab.querySelector('a');
            if (link) {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetId = link.getAttribute('href');
                    const targetEl = document.querySelector(targetId);
                    if (targetEl) {
                        window.scrollTo({
                            top: targetEl.offsetTop - 80, // í—¤ë” ë³´ì •ê°’
                            behavior: 'smooth'
                        });
                    }
                });
            }
        });

        // ìŠ¤í¬ë¡¤ ì‹œ í™œì„±í™”ëœ íƒ­ ë³€ê²½
        const sections = document.querySelectorAll('.product-section');
        window.addEventListener('scroll', () => {
            let currentId = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop - 100; // ë³´ì •ê°’
                if (window.scrollY >= sectionTop) {
                    currentId = section.getAttribute('id');
                }
            });

            tabs.forEach(tab => {
                const link = tab.querySelector('a');
                if (link) {
                    const href = link.getAttribute('href').replace('#', '');
                    tab.classList.toggle('active', href === currentId);
                }
            });
        });
    </script>
</body>
</html>